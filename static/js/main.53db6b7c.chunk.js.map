{"version":3,"sources":["spellLevel.ts","SpellView.tsx","SpellBook.tsx","BeyondFileView.tsx","LoadButton.tsx","Instructions.tsx","App.tsx","index.tsx"],"names":["sortSpells","spells","spellLevels","forEach","spell","collection","find","x","level","definition","push","sort","a","b","sl","name","SpellView","react_default","createElement","className","this","props","getComponents","components","componentsDescription","dangerouslySetInnerHTML","__html","description","trim","React","Component","map","join","SpellBook","key","SpellBook_SpellLevelText","s","SpellView_SpellView","id","SpellLevelText","levelName","concat","BeyondFileView","getClassSpells","myClass","_this","file","classes","myClassSpells","classSpells","entityTypeId","getAllClassSpells","allClassSpells","cs","apply","Object","toConsumableArray","spellsByLevel","allSpells","_len2","arguments","length","collections","Array","_key2","c","uniqueSpells","filter","y","sortMultipleSpells","item","feat","SpellBook_SpellBook","PureComponent","LoadButton","handleClick","_callee","event","regenerator_default","wrap","_context","prev","next","preventDefault","stopPropagation","onClick","stop","_this2","isWorking","working","disabled","react","style","display","iconClass","text","Instructions","state","loading","characterNumber","updateCharacterNumber","e","parseInt","target","value","setState","getCharacterJson","uri","response","responseJson","fetch","sent","status","alert","abrupt","updateCharacterJson","t0","rel","href","marginTop","marginBottom","placeholder","type","onChange","LoadButton_LoadButton","App","character","undefined","characters","loadSaved","json","localStorage","getItem","characterJson","JSON","stringify","setItem","deleteSaved","removeItem","parsed","parse","charName","err","console","log","clear","myView","document","getElementById","scrollIntoView","behavior","process","role","aria-label","src_Instructions","src_BeyondFileView","ReactDOM","render","src_App_0"],"mappings":"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","file":"static/js/main.53db6b7c.chunk.js","sourcesContent":["import { Spell } from \"./character\";\r\n\r\nexport interface SpellLevelCollection {\r\n  level: number;\r\n  spells: Spell[];\r\n}\r\n\r\n\r\n// export const unionSpells = (sc1: SpellLevelCollection[], sc2: SpellLevelCollection[]): SpellLevelCollection[] => {\r\n//   const newCollection: SpellLevelCollection[] = [];\r\n//   for (let i = 0; i < 9; i++){\r\n//     const aMatch = sc1.find(x => x.level === i);\r\n//     const bMatch = sc2.find(x => x.level === i);\r\n//     if (aMatch || bMatch){\r\n//       const allSpells: Spell[] = [];\r\n//       if (aMatch && aMatch.spells.length){\r\n//         allSpells.push(...aMatch.spells);\r\n//       }\r\n//       if (bMatch){\r\n//         allSpells.push(...bMatch.spells);\r\n//       }\r\n//       allSpells.sort((a, b) => a.definition.name > b.definition.name ? 1 : 0);\r\n//       newCollection.push({\r\n//         level: i,\r\n//         spells: allSpells,\r\n//       });      \r\n//     }\r\n//   }\r\n//   return newCollection;\r\n// };\r\n\r\nexport const unionSpells = (...collections: Array<SpellLevelCollection[] | undefined>): SpellLevelCollection[] => {\r\n  const allSpells: Spell[] = [];\r\n  collections.forEach(c => {\r\n    if (c){\r\n      c.forEach(slc => allSpells.push(...slc.spells));\r\n    }\r\n  });\r\n  return sortSpells(allSpells);\r\n};\r\n\r\nexport const sortMultipleSpells = (...collections: Array<Spell[] | undefined>): SpellLevelCollection[] => {\r\n  const allSpells: Spell[] = [];\r\n  collections.forEach(c => {\r\n    if (c){\r\n      const uniqueSpells = c.filter(x => !allSpells.find(y => y.id === x.id));\r\n      allSpells.push(...uniqueSpells);\r\n    }\r\n  });\r\n  return sortSpells(allSpells);\r\n};\r\n\r\nexport const sortSpells = (spells: Spell[]): SpellLevelCollection[] => {\r\n  const spellLevels: SpellLevelCollection[] = [];\r\n  spells.forEach(spell => {\r\n    let collection = spellLevels.find(x => x.level === spell.definition.level);\r\n    if (!collection){\r\n      collection = {\r\n        level: spell.definition.level,\r\n        spells: [spell],\r\n      };\r\n      spellLevels.push(collection);\r\n    }\r\n    else{\r\n      collection.spells.push(spell);\r\n    }    \r\n  });\r\n  spellLevels.sort((a, b) => a.level - b.level);\r\n  spellLevels.forEach(sl => {\r\n    sl.spells.sort((a, b) => a.definition.name > b.definition.name ? 1 : 0);\r\n  });\r\n  return spellLevels;\r\n};\r\n\r\n","import React from \"react\";\r\nimport { Spell } from \"./character\";\r\n\r\nexport interface ISpellViewProps {\r\n  spell: Spell;\r\n}\r\n\r\nexport default class SpellView extends React.Component<ISpellViewProps> {\r\n  public render() {\r\n    return (\r\n      <div className=\"spell\">\r\n        <div className=\"spell-name\">{this.props.spell.definition.name}</div>\r\n        <div>Components: {getComponents(this.props.spell.definition.components)}</div>\r\n        {\r\n          this.props.spell.definition.componentsDescription && (\r\n            <div>\r\n              <div>Material: {this.props.spell.definition.componentsDescription}</div>\r\n            </div>\r\n          )\r\n        }\r\n        <div dangerouslySetInnerHTML={{__html: this.props.spell.definition.description.trim()}}></div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nconst getComponents = (components: number[]) => {\r\n  const mapped = components.map(x => x === 1 ? \"V\" : x === 2 ? \"S\" : \"M\");\r\n  const joined = mapped.join(\", \");\r\n  return joined;\r\n};\r\n","import React from \"react\";\r\nimport SpellView from \"./SpellView\";\r\nimport {SpellLevelCollection} from \"./spellLevel\";\r\n\r\nexport interface ISpellBookProps {\r\n  spells: SpellLevelCollection[];\r\n}\r\n\r\nexport default class SpellBook extends React.Component<ISpellBookProps> {\r\n  public render() {\r\n    return (\r\n      <div className=\"spellbook\">\r\n        {/* <div>\r\n          <select name=\"\" id=\"\">\r\n            <option value=\"\">Normal</option>\r\n          </select>\r\n        </div> */}\r\n        <div className=\"section-to-print\">\r\n          {this.props.spells.map(sl => (\r\n            <div key={sl.level}>\r\n              <SpellLevelText level={sl.level} />\r\n              {sl.spells.map(s => (\r\n                <SpellView spell={s} key={s.id} />\r\n                // <div>Test</div>\r\n              ))}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nconst SpellLevelText = (props: {level: number}) => {\r\n  const levelName = props.level ? `Level ${props.level}` :  \"Cantrips\";\r\n  return <h1 className=\"spell-level-name\">{levelName}</h1>;\r\n};\r\n\r\n\r\n","import React from \"react\";\r\nimport {Spell, BeyondCharacter } from \"./character\";\r\nimport { sortMultipleSpells } from \"./spellLevel\";\r\nimport SpellBook from \"./SpellBook\";\r\n\r\ninterface IBeyondFileView {\r\n  file: BeyondCharacter;\r\n}\r\n\r\nclass BeyondFileView extends React.PureComponent<IBeyondFileView> {\r\n  getClassSpells = (className: string) => {\r\n    const myClass = this.props.file.classes.find(x => x.definition.name === className);\r\n    if (myClass){\r\n      const myClassSpells = this.props.file.classSpells.find(x => x.entityTypeId === myClass.entityTypeId);\r\n      if (myClassSpells){\r\n        return myClassSpells.spells;\r\n      }\r\n    }\r\n  }\r\n  getAllClassSpells = () => {\r\n    const allClassSpells: Spell[] = [];\r\n    this.props.file.classSpells.forEach(cs => allClassSpells.push(...cs.spells));\r\n    return allClassSpells;\r\n  }\r\n  render(){\r\n    //const wizardSpells = this.getClassSpells(\"Wizard\");\r\n    const classSpells = this.getAllClassSpells();\r\n    const itemSpells = this.props.file.spells.item;\r\n    const featSpells = this.props.file.spells.feat;\r\n    const spellsByLevel = sortMultipleSpells(classSpells, itemSpells, featSpells);\r\n    if (spellsByLevel.find(x => x.spells.length > 0)){ \r\n      return (\r\n        <SpellBook spells={spellsByLevel} />\r\n      );\r\n    }\r\n    else{\r\n      return (\r\n        <div>No spells</div>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport default BeyondFileView;\r\n","import * as React from \"react\";\r\nimport \"./LoadButton.css\";\r\n\r\ninterface ILoadButton{\r\n  onClick: () => void;\r\n  working?: boolean;\r\n  text: string;\r\n  className?: string;\r\n  disabled?: boolean;\r\n  iconClass?: string;\r\n}\r\n\r\nexport default class LoadButton extends React.PureComponent<ILoadButton> {\r\n  handleClick = async (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n    this.props.onClick();\r\n  }\r\n  render() {\r\n    const isWorking = this.props.working;\r\n    const disabled = this.props.disabled || false;\r\n    const className = this.props.className || \"button\";\r\n    return (\r\n      <button \r\n        disabled={disabled} \r\n        className={className + \" load-button\"} \r\n        onClick={(event) => this.handleClick(event)}>\r\n          <div style={{display: isWorking ? \"none\" : \"\"}}>\r\n          {\r\n            this.props.iconClass && (\r\n              <span className={this.props.iconClass}>&nbsp;</span>\r\n            )\r\n          }\r\n            {this.props.text}\r\n          </div>\r\n          <div style={{display: isWorking ? \"\" : \"none\"}}>\r\n          {/* All the extra divs are necessary for the css animation */}\r\n          <div className=\"lds-ellipsis\"><div></div><div></div><div></div><div></div></div></div>          \r\n      </button>);\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport \"./steps.css\";\r\nimport LoadButton from \"./LoadButton\";\r\n\r\ninterface IInstructions {\r\n  updateCharacterJson: (blob: string) => void;\r\n}\r\n\r\ninterface State {\r\n  characterNumber: string;\r\n  loading: boolean;\r\n}\r\n\r\nclass Instructions extends React.Component<IInstructions, State> {\r\n  state: State = {\r\n    loading: false,\r\n    characterNumber: process.env.NODE_ENV === \"development\" ? \"3312827\" : \"\",\r\n  };\r\n  updateCharacterNumber = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const characterNumber = parseInt(e.target.value, 10.0);\r\n    if (characterNumber > 0) {\r\n      this.setState({ characterNumber: e.target.value });\r\n    }\r\n  }\r\n  getCharacterJson = async () => {\r\n    this.setState({loading: true});\r\n    const uri = \"https://dndbeyond.azurewebsites.net/api/BeyondFile?id=\" + this.state.characterNumber;\r\n    try{\r\n      const response = await fetch(uri);\r\n      if (response.status !== 200){\r\n        alert(\"Error fetching Beyond File\");\r\n        return;\r\n      }\r\n      const responseJson = await response.text();\r\n      this.props.updateCharacterJson(responseJson);\r\n      this.setState({loading: false});\r\n    }\r\n    catch (err){\r\n      this.setState({loading: false});\r\n      alert(\"Exception fetching Beyond File\");\r\n    }   \r\n  }\r\n  render() {\r\n    const profileAddress = \"https://www.dndbeyond.com/profile/Example/characters\";\r\n    return (\r\n      <div className=\"steps\">\r\n        <div className=\"step\">\r\n          <div className=\"step-title\">Load A Character</div>\r\n          <div>\r\n            Go to <a\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n              href={\"https://www.dndbeyond.com/my-characters\"}>your character page</a> on D&amp;D Beyond,\r\n            click \"View\" on the character whose spells you wish to print.\r\n            Look at the URL in your browser address bar. It should end in a number.\r\n            Enter that number below.\r\n          </div>\r\n          <div style={{marginTop: \"10px\", marginBottom: \"10px\"}}>\r\n            For instance if your address was as follows:\r\n            <div>\r\n              <span className=\"exampleAddress\">\r\n                <span>{profileAddress}/</span>\r\n                <span className=\"highlighted\">1234567</span>\r\n              </span>\r\n            </div>\r\n            <div>Then you would enter \"1234567\"</div>\r\n          </div>\r\n          <form>\r\n            <input\r\n              placeholder=\"000000\"\r\n              type=\"text\"\r\n              value={this.state.characterNumber}\r\n              onChange={this.updateCharacterNumber} />\r\n            <LoadButton \r\n              text=\"Load Character\" \r\n              className=\"done-button\" \r\n              working={this.state.loading} \r\n              onClick={this.getCharacterJson}  />\r\n            {/* <button onClick={this.getCharacterJson} className=\"done-button\">Load Character</button> */}\r\n          </form>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default Instructions;\r\n","import React, { Component } from \"react\";\r\nimport \"./App.css\";\r\nimport { BeyondCharacter } from \"./character\";\r\nimport \"./normalize.css\";\r\nimport BeyondFileView from \"./BeyondFileView\";\r\nimport Instructions from \"./Instructions\";\r\n\r\n\r\ninterface State {\r\n  character: BeyondCharacter | undefined;\r\n  characters: string[];\r\n}\r\n\r\nclass App extends Component<{}, State> {\r\n  state: State = {\r\n    character: undefined,\r\n    characters: [],\r\n  };\r\n  componentDidMount() {\r\n    const json = localStorage.getItem(\"characters\");\r\n    if (json) {\r\n      const characters: string[] = JSON.parse(json);\r\n      if (process.env.NODE_ENV === \"development\" && characters.length > 0){\r\n        this.loadSaved(characters[0]);\r\n      }\r\n      this.setState({ characters });\r\n    }\r\n  }\r\n  loadSaved = (name: string) => {\r\n    const json = localStorage.getItem(name);\r\n    if (json) {\r\n      this.updateCharacterJson(json);\r\n    }\r\n    else {\r\n      alert(\"Sorry, could not load character from memory.\");\r\n      const characters = [...this.state.characters.filter(x => x !== name)];\r\n      characters.sort((a, b) => a < b ? 0 : 1);\r\n      this.setState({ characters }, () => {\r\n        const characterJson = JSON.stringify(characters);\r\n        localStorage.setItem(\"characters\", characterJson);\r\n      });\r\n    }\r\n  }\r\n  deleteSaved = (name: string) => {\r\n    localStorage.removeItem(name);\r\n    const characters = [...this.state.characters.filter(x => x !== name)];\r\n    characters.sort((a, b) => a < b ? 0 : 1);\r\n    this.setState({ characters });\r\n  }\r\n  updateCharacterJson = (text: string) => {\r\n    try {\r\n      const parsed: BeyondCharacter = JSON.parse(text);\r\n      if (parsed) {\r\n        const charName = parsed.name;\r\n        try{\r\n          localStorage.setItem(charName, text);\r\n        }\r\n        catch (err){\r\n          console.log(\"Couldn't save character\", err);\r\n        }\r\n        const characters = [...this.state.characters.filter(x => x !== charName), charName];\r\n        characters.sort((a, b) => a < b ? 0 : 1);\r\n        this.setState({ characters }, () => {\r\n          const characterJson = JSON.stringify(characters);\r\n          try{\r\n            localStorage.setItem(\"characters\", characterJson);\r\n          }\r\n          catch (err){\r\n            console.log(\"Couldn't save character list\", err);\r\n            localStorage.clear();\r\n            localStorage.setItem(\"characters\", characterJson);\r\n          }          \r\n        });\r\n        this.setState({ character: parsed }, () => {\r\n          const myView = document.getElementById(\"beyondFileView\");\r\n          if (myView) {\r\n            myView.scrollIntoView({ behavior: \"smooth\" });\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        alert(\"ERR1: That is not a valid JSON!\");\r\n      }\r\n    }\r\n    catch (err) {\r\n      console.log(\"ERR2\", err);\r\n      alert(\"ERR2: Something went wrong!\");\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"main\">\r\n        <h1>D&amp;D Beyond Spell Printer</h1>\r\n        <div className=\"about\">\r\n          <p>\r\n            I made this site because even though I love D&amp;D Beyond, I'm old-school and I like\r\n            to print out my character. Unfortunately, the print out doesn't include spell descriptions.\r\n            <span role=\"img\" aria-label=\"Frowning face\">🙁</span>\r\n          </p>\r\n          <p>\r\n            And sure, you can look up those descriptions in the app, which is pretty convenient, but the app\r\n            doesn't include your custom/homebrew spells. So, I decided to make this site to help me out.\r\n            This will get you a big list of all your spells for easy printing! Don't worry, it's all safe.\r\n            I don't need your password or anything. <span role=\"img\" aria-label=\"Happy face\">🙂</span>\r\n          </p>\r\n        </div>\r\n        <div className=\"beta\">\r\n          <span>This page is in Beta! If you find a problem, please </span>\r\n          <a href=\"https://github.com/Pharylon/Spellbook/issues\">submit a bug report.</a> Thanks!\r\n        </div>\r\n        <div className={\"instructions\"}>\r\n          {\r\n            !!this.state.characters.length && (\r\n              <div className=\"steps\">\r\n                <div className=\"step\">\r\n                  <div className=\"step-title\">Load A previously Saved Character</div>\r\n                  <ul>\r\n                    {this.state.characters.map(x => (\r\n                      <li key={x}>\r\n                        <span onClick={() => this.loadSaved(x)} className=\"previous-character\">{x}</span>\r\n                        <span>&nbsp;&nbsp;&nbsp;</span>\r\n                        <span onClick={() => this.deleteSaved(x)} className=\"fa fa-trash\">&nbsp;</span>\r\n\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n            )\r\n          }\r\n          <Instructions updateCharacterJson={this.updateCharacterJson} />\r\n        </div>\r\n        {\r\n          this.state.character && (\r\n            <div id=\"beyondFileView\">\r\n              <BeyondFileView file={this.state.character} />\r\n            </div>\r\n            // <WindowPortal>\r\n            //   <BeyondFileView file={this.state.file} />\r\n            // </WindowPortal>\r\n          )\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n\r\n"],"sourceRoot":""}