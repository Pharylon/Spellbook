(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,function(e,t,a){e.exports=a(23)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(10),s=a.n(l),c=(a(17),a(6)),o=a(1),i=a(2),u=a(4),p=a(3),d=a(5),m=(a(18),a(19),function(e){var t=[];return e.forEach(function(e){var a=t.find(function(t){return t.level===e.definition.level});a?a.spells.push(e):(a={level:e.definition.level,spells:[e]},t.push(a))}),t.sort(function(e,t){return e.level-t.level}),t.forEach(function(e){e.spells.sort(function(e,t){return e.definition.name>t.definition.name?1:0})}),t}),h=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"spell"},r.a.createElement("div",{className:"spell-name spell-title"},this.props.spell.definition.name),r.a.createElement("div",null,"Components: ",f(this.props.spell.definition.components)),this.props.spell.definition.componentsDescription&&r.a.createElement("div",null,r.a.createElement("div",null,"Material: ",this.props.spell.definition.componentsDescription)),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.spell.definition.description.trim()}}))}}]),t}(r.a.Component),f=function(e){return e.map(function(e){return 1===e?"V":2===e?"S":"M"}).join(", ")},v=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).fontChange=function(e){var t=document.getElementById("spellbook"),a=document.querySelectorAll(".spell-title");t&&("normal"===e.target.value&&(t.classList.remove("ye-olde"),t.classList.remove("faerie"),a.forEach(function(e){return e.classList.remove("faerie")})),"faerie"===e.target.value&&(t.classList.remove("ye-olde"),t.classList.add("faerie"),a.forEach(function(e){return e.classList.add("faerie")})),"ye-olde"===e.target.value&&(t.classList.add("ye-olde"),t.classList.remove("faerie"),a.forEach(function(e){return e.classList.remove("faerie")})))},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"spellbook"},r.a.createElement("div",null,r.a.createElement("select",{name:"font-selector",id:"font-selector",onChange:this.fontChange},r.a.createElement("option",{value:"normal"},"Normal Font"),r.a.createElement("option",{value:"faerie"},"Faerie Font"),r.a.createElement("option",{value:"ye-olde"},"Ye Olde Font"))),r.a.createElement("div",{className:"section-to-print"},this.props.spells.map(function(e){return r.a.createElement("div",{key:e.level},r.a.createElement(y,{level:e.level}),e.spells.map(function(e){return r.a.createElement(h,{spell:e,key:e.id})}))})))}}]),t}(r.a.Component),y=function(e){var t=e.level?"Level ".concat(e.level):"Cantrips";return r.a.createElement("h1",{className:"spell-level-name spell-title"},t)},b=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).getClassSpells=function(e){var t=a.props.file.classes.find(function(t){return t.definition.name===e});if(t){var n=a.props.file.classSpells.find(function(e){return e.entityTypeId===t.entityTypeId});if(n)return n.spells}},a.getAllClassSpells=function(){var e=[];return a.props.file.classSpells.forEach(function(t){return e.push.apply(e,Object(c.a)(t.spells))}),e},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=function(){for(var e=[],t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return a.forEach(function(t){if(t){var a=t.filter(function(t){return!e.find(function(e){return e.id===t.id})});e.push.apply(e,Object(c.a)(a))}}),m(e)}(this.getAllClassSpells(),this.props.file.spells.item,this.props.file.spells.feat);return e.find(function(e){return e.spells.length>0})?r.a.createElement(v,{spells:e}):r.a.createElement("div",null,"No spells")}}]),t}(r.a.PureComponent),E=a(7),g=a.n(E),w=a(8),O=(a(21),a(22),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(){var e=Object(w.a)(g.a.mark(function e(t){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),t.stopPropagation(),a.props.onClick();case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.working,a=this.props.disabled||!1,r=this.props.className||"button";return n.createElement("button",{disabled:a,className:r+" load-button",onClick:function(t){return e.handleClick(t)}},n.createElement("div",{style:{display:t?"none":""}},this.props.iconClass&&n.createElement("span",{className:this.props.iconClass},"\xa0"),this.props.text),n.createElement("div",{style:{display:t?"":"none"}},n.createElement("div",{className:"lds-ellipsis"},n.createElement("div",null),n.createElement("div",null),n.createElement("div",null),n.createElement("div",null))))}}]),t}(n.PureComponent)),S=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!1,characterNumber:""},a.updateCharacterNumber=function(e){parseInt(e.target.value,10)>0&&a.setState({characterNumber:e.target.value})},a.getCharacterJson=Object(w.a)(g.a.mark(function e(){var t,n,r;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loading:!0}),t="https://dndbeyond.azurewebsites.net/api/BeyondFile?id="+a.state.characterNumber,e.prev=2,e.next=5,fetch(t);case 5:if(200===(n=e.sent).status){e.next=9;break}return alert("Error fetching Beyond File"),e.abrupt("return");case 9:return e.next=11,n.text();case 11:r=e.sent,a.props.updateCharacterJson(r),a.setState({loading:!1}),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(2),a.setState({loading:!1}),alert("Exception fetching Beyond File");case 20:case"end":return e.stop()}},e,null,[[2,16]])})),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"steps"},r.a.createElement("div",{className:"step"},r.a.createElement("div",{className:"step-title"},"Load A Character"),r.a.createElement("div",null,"Go to ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.dndbeyond.com/my-characters"},"your character page"),' on D&D Beyond, click "View" on the character whose spells you wish to print. Look at the URL in your browser address bar. It should end in a number. Enter that number below.'),r.a.createElement("div",{style:{marginTop:"10px",marginBottom:"10px"}},"For instance if your address was as follows:",r.a.createElement("div",null,r.a.createElement("span",{className:"exampleAddress"},r.a.createElement("span",null,"https://www.dndbeyond.com/profile/Example/characters","/"),r.a.createElement("span",{className:"highlighted"},"1234567"))),r.a.createElement("div",null,'Then you would enter "1234567"')),r.a.createElement("form",null,r.a.createElement("input",{placeholder:"000000",type:"text",value:this.state.characterNumber,onChange:this.updateCharacterNumber}),r.a.createElement(O,{text:"Load Character",className:"done-button",working:this.state.loading,onClick:this.getCharacterJson}))))}}]),t}(r.a.Component),j=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={character:void 0,characters:[]},a.loadSaved=function(e){var t=localStorage.getItem(e);if(t)a.updateCharacterJson(t);else{alert("Sorry, could not load character from memory.");var n=Object(c.a)(a.state.characters.filter(function(t){return t!==e}));n.sort(function(e,t){return e<t?0:1}),a.setState({characters:n},function(){var e=JSON.stringify(n);localStorage.setItem("characters",e)})}},a.deleteSaved=function(e){localStorage.removeItem(e);var t=Object(c.a)(a.state.characters.filter(function(t){return t!==e}));t.sort(function(e,t){return e<t?0:1}),a.setState({characters:t})},a.updateCharacterJson=function(e){try{var t=JSON.parse(e);if(t){var n=t.name;try{localStorage.setItem(n,e)}catch(l){console.log("Couldn't save character",l)}var r=[].concat(Object(c.a)(a.state.characters.filter(function(e){return e!==n})),[n]);r.sort(function(e,t){return e<t?0:1}),a.setState({characters:r},function(){var e=JSON.stringify(r);try{localStorage.setItem("characters",e)}catch(l){console.log("Couldn't save character list",l),localStorage.clear(),localStorage.setItem("characters",e)}}),a.setState({character:t},function(){var e=document.getElementById("beyondFileView");e&&e.scrollIntoView({behavior:"smooth"})})}else alert("ERR1: That is not a valid JSON!")}catch(l){console.log("ERR2",l),alert("ERR2: Something went wrong!")}},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("characters");if(e){var t=JSON.parse(e);0,this.setState({characters:t})}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"main"},r.a.createElement("h1",null,"D&D Beyond Spell Printer"),r.a.createElement("div",{className:"about"},r.a.createElement("p",null,"I made this site because even though I love D&D Beyond, I'm old-school and I like to print out my character. Unfortunately, the print out doesn't include spell descriptions.",r.a.createElement("span",{role:"img","aria-label":"Frowning face"},"\ud83d\ude41")),r.a.createElement("p",null,"And sure, you can look up those descriptions in the app, which is pretty convenient, but the app doesn't include your custom/homebrew spells. So, I decided to make this site to help me out. This will get you a big list of all your spells for easy printing! Don't worry, it's all safe. I don't need your password or anything. ",r.a.createElement("span",{role:"img","aria-label":"Happy face"},"\ud83d\ude42"))),r.a.createElement("div",{className:"beta"},r.a.createElement("span",null,"This page is in Beta! If you find a problem, please "),r.a.createElement("a",{href:"https://github.com/Pharylon/Spellbook/issues"},"submit a bug report.")," Thanks!"),r.a.createElement("div",{className:"instructions"},!!this.state.characters.length&&r.a.createElement("div",{className:"steps"},r.a.createElement("div",{className:"step"},r.a.createElement("div",{className:"step-title"},"Load A previously Saved Character"),r.a.createElement("ul",null,this.state.characters.map(function(t){return r.a.createElement("li",{key:t},r.a.createElement("span",{onClick:function(){return e.loadSaved(t)},className:"previous-character"},t),r.a.createElement("span",null,"\xa0\xa0\xa0"),r.a.createElement("span",{onClick:function(){return e.deleteSaved(t)},className:"fa fa-trash"},"\xa0"))})))),r.a.createElement(S,{updateCharacterJson:this.updateCharacterJson})),this.state.character&&r.a.createElement("div",{id:"beyondFileView"},r.a.createElement(b,{file:this.state.character})))}}]),t}(n.Component);s.a.render(r.a.createElement(j,null),document.getElementById("root"))}],[[11,1,2]]]);
//# sourceMappingURL=main.bd0b3ef4.chunk.js.map