(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,a){e.exports=a(24)},18:function(e,t,a){},19:function(e,t,a){},20:function(e,t,a){},23:function(e,t,a){},24:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(9),o=a.n(l),s=(a(18),a(7)),c=a(2),i=a(3),u=a(5),p=a(4),m=a(6),h=(a(19),a(20),function(e){var t=[];return e.forEach(function(e){var a=t.find(function(t){return t.level===e.definition.level});a?a.spells.push(e):(a={level:e.definition.level,spells:[e]},t.push(a))}),t.sort(function(e,t){return e.level-t.level}),t.forEach(function(e){e.spells.sort(function(e,t){return e.definition.name>t.definition.name?1:0})}),t}),d=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"spell"},r.a.createElement("div",{className:"spell-name"},this.props.spell.definition.name),r.a.createElement("div",null,"Components: ",f(this.props.spell.definition.components)),this.props.spell.definition.componentsDescription&&r.a.createElement("div",null,r.a.createElement("div",null,"Material: ",this.props.spell.definition.componentsDescription)),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.spell.definition.description.trim()}}))}}]),t}(r.a.Component),f=function(e){return e.map(function(e){return 1===e?"V":2===e?"S":"M"}).join(", ")},v=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"spellbook"},r.a.createElement("div",{className:"section-to-print"},this.props.spells.map(function(e){return r.a.createElement("div",{key:e.level},e.level?r.a.createElement("h1",null,"Level ",e.level):r.a.createElement("h1",null,"Cantrips"),e.spells.map(function(e){return r.a.createElement(d,{spell:e,key:e.id})}))})))}}]),t}(r.a.Component),b=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).getClassSpells=function(e){var t=a.props.file.character.classes.find(function(t){return t.definition.name===e});if(t){var n=a.props.file.character.classSpells.find(function(e){return e.entityTypeId===t.entityTypeId});if(n)return n.spells}},a.getAllClassSpells=function(){var e=[];return a.props.file.character.classSpells.forEach(function(t){return e.push.apply(e,Object(s.a)(t.spells))}),e},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=function(){for(var e=[],t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return a.forEach(function(t){if(t){var a=t.filter(function(t){return!e.find(function(e){return e.id===t.id})});e.push.apply(e,Object(s.a)(a))}}),h(e)}(this.getAllClassSpells(),this.props.file.character.spells.item,this.props.file.character.spells.feat);return e.find(function(e){return e.spells.length>0})?r.a.createElement(v,{spells:e}):r.a.createElement("div",null,"No spells")}}]),t}(r.a.PureComponent),E=a(11),g=(a(23),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={profileName:"",characterNumber:"",step:1,buttonDisabled:!0,textBlob:void 0},a.updateProfileName=function(e){return a.setState({profileName:e.target.value})},a.updateTextArea=function(e){var t=!e.target.value&&0===e.target.value.length,n=new Blob([e.target.value],{type:"text/plain"});a.setState({textBlob:n,buttonDisabled:t})},a.updateCharacterNumber=function(e){parseInt(e.target.value,10)>0&&a.setState({characterNumber:e.target.value})},a.setProfile=function(e){e.preventDefault(),e.stopPropagation(),window.localStorage.setItem("profileName",a.state.profileName),a.setState(function(e){return{step:e.step+1}})},a.setCharNum=function(e){e.preventDefault(),e.stopPropagation(),a.state.characterNumber&&window.localStorage.setItem("characterNumber",a.state.characterNumber.toString()),a.setState(function(e){return{step:e.step+1}})},a.setCharacterJson=function(e){e.preventDefault(),e.stopPropagation(),a.state.textBlob&&a.props.updateCharacterJson(a.state.textBlob)},a.onDrop=function(e,t){console.log("DROP"),e.length>0&&a.props.updateCharacterJson(e[0]),t.length>0&&alert("Only JSON files can be uploaded!")},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("profileName"),t=localStorage.getItem("characterNumber");e&&t?this.setState({profileName:e,characterNumber:t,step:3}):e&&this.setState({profileName:e,step:2})}},{key:"render",value:function(){var e="https://www.dndbeyond.com/profile/".concat(this.state.profileName||"Example","/characters"),t="https://www.dndbeyond.com/profile/".concat(this.state.profileName||"Example")+"/characters/".concat(this.state.characterNumber||1234567,"/json");return r.a.createElement("div",{className:"steps"},r.a.createElement("div",{className:this.state.step>=1?"step":"step step-disabled"},r.a.createElement("div",{className:"step-title"},"Step 1"),r.a.createElement("div",null,"Go to ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.dndbeyond.com"},"D&D Beyond")," and log in. Once you're logged in, look in the top-right corner of the page. See your profile name? Enter it here:"),r.a.createElement("form",null,r.a.createElement("input",{placeholder:"Your Profile Name",type:"text",value:this.state.profileName,onChange:this.updateProfileName}),r.a.createElement("button",{onClick:this.setProfile,className:"done-button"},"Done"))),r.a.createElement("div",{className:this.state.step>=2?"step":"step step-disabled"},r.a.createElement("div",{className:"step-title"},"Step 2"),r.a.createElement("div",null,"Go to ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e},"your character page"),' on D&D Beyond, click "View" on the character who\'s spells you wish to print. Look at the URL in your browser address bar. It should end in a number. Enter that number below'),r.a.createElement("form",null,r.a.createElement("input",{placeholder:"1234567",type:"text",value:this.state.characterNumber,onChange:this.updateCharacterNumber}),r.a.createElement("button",{onClick:this.setCharNum,className:"done-button"},"Done")),r.a.createElement("div",null,"For instance if your address was as follows:",r.a.createElement("div",null,r.a.createElement("span",{className:"exampleAddress"},r.a.createElement("span",null,e,"/"),r.a.createElement("span",{className:"highlighted"},"1234567"))),r.a.createElement("div",null,'Then you would enter "1234567"'))),r.a.createElement("div",{className:this.state.step>=3?"step":"step step-disabled"},r.a.createElement("div",{className:"step-title"},"Step 3"),r.a.createElement("div",null,"Follow this link:"),r.a.createElement("div",{className:"final-link"},r.a.createElement("a",{className:"final-uri",target:"_blank",rel:"noopener noreferrer",href:t},t)),r.a.createElement("div",null,'Right-click on the page and save the file to your PC. The file should end with ".json". Then upload that file here:'),r.a.createElement("div",null,r.a.createElement(E.a,{accept:".json",onDrop:this.onDrop},function(e){var t=e.getRootProps,a=e.getInputProps;return r.a.createElement("section",null,r.a.createElement("div",t(),r.a.createElement("input",a()),r.a.createElement("div",{className:"drop"},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("span",{className:"fa fa-file"}),"\xa0Drop json here")))))}))))}}]),t}(r.a.Component)),y=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={file:void 0,characters:[]},a.loadSaved=function(e){var t=localStorage.getItem(e);if(t)a.updateCharacterJson(t);else{alert("Sorry, could not load character from memory.");var n=Object(s.a)(a.state.characters.filter(function(t){return t!==e}));n.sort(function(e,t){return e<t?0:1}),a.setState({characters:n},function(){var e=JSON.stringify(n);localStorage.setItem("characters",e)})}},a.updateCharacterJson=function(e){try{var t=JSON.parse(e);if(t&&t.character){var n=t.character.name;localStorage.setItem(n,e);var r=[].concat(Object(s.a)(a.state.characters.filter(function(e){return e!==n})),[n]);r.sort(function(e,t){return e<t?0:1}),a.setState({characters:r},function(){var e=JSON.stringify(r);localStorage.setItem("characters",e)}),a.setState({file:t},function(){var e=document.getElementById("beyondFileView");e&&e.scrollIntoView({behavior:"smooth"})})}else alert("That is not a valid JSON!")}catch(l){alert("That is not a valid JSON!")}},a.updateCharacterBlob=function(e){console.log("Blob One");var t=new FileReader;t.onload=function(){t.result&&"string"===typeof t.result&&a.updateCharacterJson(t.result)},t.readAsText(e)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("characters");if(e){var t=JSON.parse(e);this.setState({characters:t})}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"main"},r.a.createElement("h1",null,"D&D Beyond Spell Printer"),r.a.createElement("div",{className:"about"},r.a.createElement("p",null,"I made this site because even though I love D&D Beyond, I'm old-school and I like to print out my character. Unfortunately, the print out doesn't include spell descriptions.",r.a.createElement("span",{role:"img","aria-label":"Frowning face"},"\ud83d\ude41")),r.a.createElement("p",null,"And sure, you can look up those descriptions in the app, which is pretty convenient, but the app doesn't include your custom/homebrew spells. So, I decided to make this site to help me out. This will get you a big list of all your spells for easy printing! Don't worry, it's all safe. I don't need your password or anything. ",r.a.createElement("span",{role:"img","aria-label":"Happy face"},"\ud83d\ude42"))),r.a.createElement("div",{className:"beta"},r.a.createElement("span",null,"This page is in Beta! If you find a problem, please "),r.a.createElement("a",{href:"https://github.com/Pharylon/Spellbook/issues"},"submit a bug report.")," Thanks!"),r.a.createElement("div",{className:"instructions"},!!this.state.characters.length&&r.a.createElement("div",{className:"steps"},r.a.createElement("div",{className:"step"},r.a.createElement("div",{className:"step-title"},"Load A previously Saved Character"),r.a.createElement("ul",null,this.state.characters.map(function(t){return r.a.createElement("li",{onClick:function(){return e.loadSaved(t)},key:t},r.a.createElement("span",{className:"previous-character"},t,"\xa0"))}))),r.a.createElement("div",{className:"or"}," - OR LOAD A NEW FILE -")),r.a.createElement(g,{updateCharacterJson:this.updateCharacterBlob})),this.state.file&&r.a.createElement("div",{id:"beyondFileView"},r.a.createElement(b,{file:this.state.file})))}}]),t}(n.Component);o.a.render(r.a.createElement(y,null),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.02bab954.chunk.js.map