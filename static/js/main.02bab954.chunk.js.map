{"version":3,"sources":["spellLevel.ts","SpellView.tsx","SpellBook.tsx","BeyondFileView.tsx","Instructions.tsx","App.tsx","index.tsx"],"names":["sortSpells","spells","spellLevels","forEach","spell","collection","find","x","level","definition","push","sort","a","b","sl","name","SpellView","react_default","createElement","className","this","props","getComponents","components","componentsDescription","dangerouslySetInnerHTML","__html","description","trim","React","Component","map","join","SpellBook","key","s","SpellView_SpellView","id","BeyondFileView","getClassSpells","myClass","_this","file","character","classes","myClassSpells","classSpells","entityTypeId","getAllClassSpells","allClassSpells","cs","apply","Object","toConsumableArray","spellsByLevel","allSpells","_len2","arguments","length","collections","Array","_key2","c","uniqueSpells","filter","y","sortMultipleSpells","item","feat","SpellBook_SpellBook","PureComponent","Instructions","state","profileName","characterNumber","step","buttonDisabled","textBlob","undefined","updateProfileName","e","setState","target","value","updateTextArea","Blob","type","updateCharacterNumber","parseInt","setProfile","preventDefault","stopPropagation","window","localStorage","setItem","prevState","setCharNum","toString","setCharacterJson","updateCharacterJson","onDrop","accepted","rejected","console","log","alert","getItem","profileAddress","concat","finalUri","rel","href","placeholder","onChange","onClick","es","accept","_ref","getRootProps","getInputProps","App","characters","loadSaved","json","characterJson","JSON","stringify","text","parsed","parse","charName","myView","document","getElementById","scrollIntoView","behavior","_unused","updateCharacterBlob","blob","reader","FileReader","onload","result","readAsText","_this2","role","aria-label","src_Instructions","src_BeyondFileView","ReactDOM","render","src_App_0"],"mappings":"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","file":"static/js/main.02bab954.chunk.js","sourcesContent":["import { Spell } from \"./character\";\r\n\r\nexport interface SpellLevelCollection {\r\n  level: number;\r\n  spells: Spell[];\r\n}\r\n\r\n\r\n// export const unionSpells = (sc1: SpellLevelCollection[], sc2: SpellLevelCollection[]): SpellLevelCollection[] => {\r\n//   const newCollection: SpellLevelCollection[] = [];\r\n//   for (let i = 0; i < 9; i++){\r\n//     const aMatch = sc1.find(x => x.level === i);\r\n//     const bMatch = sc2.find(x => x.level === i);\r\n//     if (aMatch || bMatch){\r\n//       const allSpells: Spell[] = [];\r\n//       if (aMatch && aMatch.spells.length){\r\n//         allSpells.push(...aMatch.spells);\r\n//       }\r\n//       if (bMatch){\r\n//         allSpells.push(...bMatch.spells);\r\n//       }\r\n//       allSpells.sort((a, b) => a.definition.name > b.definition.name ? 1 : 0);\r\n//       newCollection.push({\r\n//         level: i,\r\n//         spells: allSpells,\r\n//       });      \r\n//     }\r\n//   }\r\n//   return newCollection;\r\n// };\r\n\r\nexport const unionSpells = (...collections: Array<SpellLevelCollection[] | undefined>): SpellLevelCollection[] => {\r\n  const allSpells: Spell[] = [];\r\n  collections.forEach(c => {\r\n    if (c){\r\n      c.forEach(slc => allSpells.push(...slc.spells));\r\n    }\r\n  });\r\n  return sortSpells(allSpells);\r\n};\r\n\r\nexport const sortMultipleSpells = (...collections: Array<Spell[] | undefined>): SpellLevelCollection[] => {\r\n  const allSpells: Spell[] = [];\r\n  collections.forEach(c => {\r\n    if (c){\r\n      const uniqueSpells = c.filter(x => !allSpells.find(y => y.id === x.id));\r\n      allSpells.push(...uniqueSpells);\r\n    }\r\n  });\r\n  return sortSpells(allSpells);\r\n};\r\n\r\nexport const sortSpells = (spells: Spell[]): SpellLevelCollection[] => {\r\n  const spellLevels: SpellLevelCollection[] = [];\r\n  spells.forEach(spell => {\r\n    let collection = spellLevels.find(x => x.level === spell.definition.level);\r\n    if (!collection){\r\n      collection = {\r\n        level: spell.definition.level,\r\n        spells: [spell],\r\n      };\r\n      spellLevels.push(collection);\r\n    }\r\n    else{\r\n      collection.spells.push(spell);\r\n    }    \r\n  });\r\n  spellLevels.sort((a, b) => a.level - b.level);\r\n  spellLevels.forEach(sl => {\r\n    sl.spells.sort((a, b) => a.definition.name > b.definition.name ? 1 : 0);\r\n  });\r\n  return spellLevels;\r\n};\r\n\r\n","import React from \"react\";\r\nimport { Spell } from \"./character\";\r\n\r\nexport interface ISpellViewProps {\r\n  spell: Spell;\r\n}\r\n\r\nexport default class SpellView extends React.Component<ISpellViewProps> {\r\n  public render() {\r\n    return (\r\n      <div className=\"spell\">\r\n        <div className=\"spell-name\">{this.props.spell.definition.name}</div>\r\n        <div>Components: {getComponents(this.props.spell.definition.components)}</div>\r\n        {\r\n          this.props.spell.definition.componentsDescription && (\r\n            <div>\r\n              <div>Material: {this.props.spell.definition.componentsDescription}</div>\r\n            </div>\r\n          )\r\n        }\r\n        <div dangerouslySetInnerHTML={{__html: this.props.spell.definition.description.trim()}}></div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nconst getComponents = (components: number[]) => {\r\n  const mapped = components.map(x => x === 1 ? \"V\" : x === 2 ? \"S\" : \"M\");\r\n  const joined = mapped.join(\", \");\r\n  return joined;\r\n};\r\n","import React from \"react\";\r\nimport SpellView from \"./SpellView\";\r\nimport {SpellLevelCollection} from \"./spellLevel\";\r\n\r\nexport interface ISpellBookProps {\r\n  spells: SpellLevelCollection[];\r\n}\r\n\r\nexport default class SpellBook extends React.Component<ISpellBookProps> {\r\n  public render() {\r\n    return (\r\n      <div className=\"spellbook\">\r\n        <div className=\"section-to-print\">\r\n          {this.props.spells.map(sl => (\r\n            <div key={sl.level}>\r\n              {\r\n                sl.level ? <h1>Level {sl.level}</h1> : <h1>Cantrips</h1>\r\n              }\r\n              {sl.spells.map(s => (\r\n                <SpellView spell={s} key={s.id} />\r\n                // <div>Test</div>\r\n              ))}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\n","import React from \"react\";\r\nimport BeyondFile, { Spell } from \"./character\";\r\nimport { sortMultipleSpells } from \"./spellLevel\";\r\nimport SpellBook from \"./SpellBook\";\r\n\r\ninterface IBeyondFileView {\r\n  file: BeyondFile;\r\n}\r\n\r\nclass BeyondFileView extends React.PureComponent<IBeyondFileView> {\r\n  getClassSpells = (className: string) => {\r\n    const myClass = this.props.file.character.classes.find(x => x.definition.name === className);\r\n    if (myClass){\r\n      const myClassSpells = this.props.file.character.classSpells.find(x => x.entityTypeId === myClass.entityTypeId);\r\n      if (myClassSpells){\r\n        return myClassSpells.spells;\r\n      }\r\n    }\r\n  }\r\n  getAllClassSpells = () => {\r\n    const allClassSpells: Spell[] = [];\r\n    this.props.file.character.classSpells.forEach(cs => allClassSpells.push(...cs.spells));\r\n    return allClassSpells;\r\n  }\r\n  render(){\r\n    //const wizardSpells = this.getClassSpells(\"Wizard\");\r\n    const classSpells = this.getAllClassSpells();\r\n    const itemSpells = this.props.file.character.spells.item;\r\n    const featSpells = this.props.file.character.spells.feat;\r\n    const spellsByLevel = sortMultipleSpells(classSpells, itemSpells, featSpells);\r\n    if (spellsByLevel.find(x => x.spells.length > 0)){ \r\n      return (\r\n        <SpellBook spells={spellsByLevel} />\r\n      );\r\n    }\r\n    else{\r\n      return (\r\n        <div>No spells</div>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport default BeyondFileView;\r\n","import React from \"react\";\r\nimport DropZone from \"react-dropzone\";\r\nimport \"./steps.css\";\r\n\r\ninterface IInstructions {\r\n  updateCharacterJson: (blob: Blob) => void;\r\n}\r\n\r\ninterface State {\r\n  profileName: string;\r\n  characterNumber: string;\r\n  step: number;\r\n  textBlob: Blob | undefined;\r\n  buttonDisabled: boolean;\r\n}\r\n\r\nclass Instructions extends React.Component<IInstructions, State> {\r\n  state: State = {\r\n    profileName: \"\",\r\n    characterNumber: \"\",\r\n    step: 1,\r\n    buttonDisabled: true,\r\n    textBlob: undefined,\r\n  };\r\n  componentDidMount() {\r\n    const profileName = localStorage.getItem(\"profileName\");\r\n    const characterNumber = localStorage.getItem(\"characterNumber\");\r\n    if (profileName && characterNumber) {\r\n      this.setState({ profileName, characterNumber, step: 3 });\r\n    }\r\n    else if (profileName) {\r\n      this.setState({ profileName, step: 2 });\r\n    }\r\n  }\r\n  updateProfileName = (e: React.ChangeEvent<HTMLInputElement>) => this.setState({ profileName: e.target.value });\r\n  updateTextArea = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n    const buttonDisabled: boolean = !e.target.value && e.target.value.length === 0;\r\n    const textBlob = new Blob([e.target.value], { type: \"text/plain\" });\r\n    this.setState({ textBlob, buttonDisabled });\r\n  }\r\n  updateCharacterNumber = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const characterNumber = parseInt(e.target.value, 10.0);\r\n    if (characterNumber > 0) {\r\n      this.setState({ characterNumber: e.target.value });\r\n    }\r\n  }\r\n  //updateCharacterJson = (e: React.ChangeEvent<HTMLTextAreaElement>) => this.props.updateCharacterJson(e.target.value);\r\n  setProfile = (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    window.localStorage.setItem(\"profileName\", this.state.profileName);\r\n    this.setState(prevState => ({ step: prevState.step + 1 }));\r\n  }\r\n  setCharNum = (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    if (this.state.characterNumber) {\r\n      window.localStorage.setItem(\"characterNumber\", this.state.characterNumber.toString());\r\n    }\r\n    this.setState(prevState => ({ step: prevState.step + 1 }));\r\n  }\r\n  setCharacterJson = (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    if (this.state.textBlob) {\r\n      this.props.updateCharacterJson(this.state.textBlob);\r\n    }\r\n  }\r\n  onDrop = (accepted: File[], rejected: File[]) => {\r\n    console.log(\"DROP\");\r\n    if (accepted.length > 0) {\r\n      this.props.updateCharacterJson(accepted[0]);\r\n    }\r\n    if (rejected.length > 0) {\r\n      alert(\"Only JSON files can be uploaded!\");\r\n    }\r\n  }\r\n  render() {\r\n    const profileAddress = `https://www.dndbeyond.com/profile/${this.state.profileName || \"Example\"}/characters`;\r\n    const finalUri = `https://www.dndbeyond.com/profile/${this.state.profileName || \"Example\"}` +\r\n      `/characters/${this.state.characterNumber || 1234567}/json`;\r\n    return (\r\n      <div className=\"steps\">\r\n        <div className={this.state.step >= 1 ? \"step\" : \"step step-disabled\"}>\r\n          <div className=\"step-title\">Step 1</div>\r\n          <div>\r\n            Go to <a\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n              href=\"https://www.dndbeyond.com\">D&amp;D Beyond</a> and log in.\r\n            Once you're logged in, look in the top-right corner of the page. See your profile name? Enter it here:\r\n          </div>\r\n          <form>\r\n            <input\r\n              placeholder=\"Your Profile Name\"\r\n              type=\"text\" value={this.state.profileName}\r\n              onChange={this.updateProfileName} />\r\n            <button onClick={this.setProfile} className=\"done-button\">Done</button>\r\n          </form>\r\n        </div>\r\n        <div className={this.state.step >= 2 ? \"step\" : \"step step-disabled\"}>\r\n          <div className=\"step-title\">Step 2</div>\r\n          <div>\r\n            Go to <a\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n              href={profileAddress}>your character page</a> on D&amp;D Beyond,\r\n            click \"View\" on the character who's spells you wish to print.\r\n            Look at the URL in your browser address bar. It should end in a number.\r\n            Enter that number below\r\n          </div>\r\n          <form>\r\n            <input\r\n              placeholder=\"1234567\"\r\n              type=\"text\"\r\n              value={this.state.characterNumber}\r\n              onChange={this.updateCharacterNumber} />\r\n            <button onClick={this.setCharNum} className=\"done-button\">Done</button>\r\n          </form>\r\n          <div>\r\n            For instance if your address was as follows:\r\n            <div>\r\n              <span className=\"exampleAddress\">\r\n                <span>{profileAddress}/</span>\r\n                <span className=\"highlighted\">1234567</span>\r\n              </span>\r\n            </div>\r\n            <div>Then you would enter \"1234567\"</div>\r\n          </div>\r\n        </div>\r\n        <div className={this.state.step >= 3 ? \"step\" : \"step step-disabled\"}>\r\n          <div className=\"step-title\">Step 3</div>\r\n          <div>Follow this link:</div>\r\n          <div className=\"final-link\">\r\n            <a className=\"final-uri\" target=\"_blank\" rel=\"noopener noreferrer\" href={finalUri}>{finalUri}</a>\r\n          </div>\r\n          <div>\r\n            Right-click on the page and save the file to your PC. The file should end with \".json\".\r\n            Then upload that file here:\r\n          </div>\r\n          <div>\r\n            <DropZone\r\n              accept=\".json\"\r\n              onDrop={this.onDrop}>\r\n                {({getRootProps, getInputProps}) => (\r\n                  <section>\r\n                    <div {...getRootProps()}>\r\n                      <input {...getInputProps()} />\r\n                      <div className=\"drop\">\r\n                        <div>\r\n                          <div><span className=\"fa fa-file\"></span>&nbsp;Drop json here</div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </section>\r\n                )}\r\n            </DropZone>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default Instructions;\r\n","import React, { Component } from \"react\";\r\nimport \"./App.css\";\r\nimport BeyondFile from \"./character\";\r\nimport \"./normalize.css\";\r\nimport BeyondFileView from \"./BeyondFileView\";\r\nimport Instructions from \"./Instructions\";\r\n\r\n\r\ninterface State {\r\n  file: BeyondFile | undefined;\r\n  characters: string[];\r\n}\r\n\r\nclass App extends Component<{}, State> {\r\n  state: State = {\r\n    file: undefined,\r\n    characters: [],\r\n  };\r\n  componentDidMount() {\r\n    const json = localStorage.getItem(\"characters\");\r\n    if (json) {\r\n      const characters: string[] = JSON.parse(json);\r\n      this.setState({ characters });\r\n    }\r\n  }\r\n  loadSaved = (name: string) => {\r\n    const json = localStorage.getItem(name);\r\n    if (json) {\r\n      this.updateCharacterJson(json);\r\n    }\r\n    else {\r\n      alert(\"Sorry, could not load character from memory.\");\r\n      const characters = [...this.state.characters.filter(x => x !== name)];\r\n      characters.sort((a, b) => a < b ? 0 : 1);\r\n      this.setState({ characters }, () => {\r\n        const characterJson = JSON.stringify(characters);\r\n        localStorage.setItem(\"characters\", characterJson);\r\n      });\r\n    }\r\n  }\r\n  updateCharacterJson = (text: string) => {\r\n    try {\r\n      const parsed: BeyondFile = JSON.parse(text);\r\n      if (parsed && parsed.character) {\r\n        const charName = parsed.character.name;\r\n        localStorage.setItem(charName, text);\r\n        const characters = [...this.state.characters.filter(x => x !== charName), charName];\r\n        characters.sort((a, b) => a < b ? 0 : 1);\r\n        this.setState({ characters }, () => {\r\n          const characterJson = JSON.stringify(characters);\r\n          localStorage.setItem(\"characters\", characterJson);\r\n        });\r\n        this.setState({ file: parsed }, () => {\r\n          const myView = document.getElementById(\"beyondFileView\");\r\n          if (myView) {\r\n            myView.scrollIntoView({ behavior: \"smooth\" });\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        alert(\"That is not a valid JSON!\");\r\n      }\r\n    }\r\n    catch {\r\n      alert(\"That is not a valid JSON!\");\r\n    }\r\n  }\r\n  updateCharacterBlob = (blob: Blob) => {\r\n    console.log(\"Blob One\");\r\n    const reader = new FileReader();\r\n    reader.onload = () => {\r\n      if (reader.result && typeof reader.result === \"string\") {\r\n        this.updateCharacterJson(reader.result);\r\n      }\r\n    };\r\n    reader.readAsText(blob);\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"main\">\r\n        <h1>D&amp;D Beyond Spell Printer</h1>\r\n        <div className=\"about\">\r\n          <p>\r\n            I made this site because even though I love D&amp;D Beyond, I'm old-school and I like\r\n            to print out my character. Unfortunately, the print out doesn't include spell descriptions.\r\n            <span role=\"img\" aria-label=\"Frowning face\">üôÅ</span>\r\n          </p>\r\n          <p>\r\n            And sure, you can look up those descriptions in the app, which is pretty convenient, but the app\r\n            doesn't include your custom/homebrew spells. So, I decided to make this site to help me out.\r\n            This will get you a big list of all your spells for easy printing! Don't worry, it's all safe.\r\n            I don't need your password or anything. <span role=\"img\" aria-label=\"Happy face\">üôÇ</span>\r\n          </p>\r\n        </div>\r\n        <div className=\"beta\">\r\n          <span>This page is in Beta! If you find a problem, please </span>\r\n          <a href=\"https://github.com/Pharylon/Spellbook/issues\">submit a bug report.</a> Thanks!\r\n        </div>\r\n        <div className={\"instructions\"}>\r\n          {\r\n            !!this.state.characters.length && (\r\n              <div className=\"steps\">\r\n                <div className=\"step\">\r\n                  <div className=\"step-title\">Load A previously Saved Character</div>\r\n                  <ul>\r\n                    {this.state.characters.map(x => (\r\n                      <li onClick={() => this.loadSaved(x)} key={x}>\r\n                        <span className=\"previous-character\">{x}&nbsp;</span>\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                </div>\r\n                <div className=\"or\"> - OR LOAD A NEW FILE -</div>\r\n              </div>\r\n            )\r\n          }\r\n          <Instructions updateCharacterJson={this.updateCharacterBlob} />\r\n        </div>\r\n        {\r\n          this.state.file && (\r\n            <div id=\"beyondFileView\">\r\n              <BeyondFileView file={this.state.file} />\r\n            </div>\r\n            // <WindowPortal>\r\n            //   <BeyondFileView file={this.state.file} />\r\n            // </WindowPortal>\r\n          )\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n\r\n"],"sourceRoot":""}